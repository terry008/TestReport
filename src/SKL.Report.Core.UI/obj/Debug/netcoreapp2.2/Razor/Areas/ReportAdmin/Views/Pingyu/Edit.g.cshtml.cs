#pragma checksum "/Users/pandanting/Projects/TestReport/src/SKL.Report.Core.UI/Areas/ReportAdmin/Views/Pingyu/Edit.cshtml" "{ff1816ec-aa5e-4d10-87f7-6f4963833460}" "247394bb2d0747b5c1a654db395b8ebf9bfba729"
// <auto-generated/>
#pragma warning disable 1591
[assembly: global::Microsoft.AspNetCore.Razor.Hosting.RazorCompiledItemAttribute(typeof(AspNetCore.Areas_ReportAdmin_Views_Pingyu_Edit), @"mvc.1.0.view", @"/Areas/ReportAdmin/Views/Pingyu/Edit.cshtml")]
[assembly:global::Microsoft.AspNetCore.Mvc.Razor.Compilation.RazorViewAttribute(@"/Areas/ReportAdmin/Views/Pingyu/Edit.cshtml", typeof(AspNetCore.Areas_ReportAdmin_Views_Pingyu_Edit))]
namespace AspNetCore
{
    #line hidden
    using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Threading.Tasks;
    using Microsoft.AspNetCore.Mvc;
    using Microsoft.AspNetCore.Mvc.Rendering;
    using Microsoft.AspNetCore.Mvc.ViewFeatures;
#line 1 "/Users/pandanting/Projects/TestReport/src/SKL.Report.Core.UI/Areas/ReportAdmin/Views/_ViewImports.cshtml"
using SKL.Report.Core.UI;

#line default
#line hidden
#line 2 "/Users/pandanting/Projects/TestReport/src/SKL.Report.Core.UI/Areas/ReportAdmin/Views/_ViewImports.cshtml"
using SKL.Report.Core.UI.Models;

#line default
#line hidden
#line 3 "/Users/pandanting/Projects/TestReport/src/SKL.Report.Core.UI/Areas/ReportAdmin/Views/_ViewImports.cshtml"
using SKL.Report.Core.UI.Areas.ReportAdmin.Models;

#line default
#line hidden
#line 4 "/Users/pandanting/Projects/TestReport/src/SKL.Report.Core.UI/Areas/ReportAdmin/Views/_ViewImports.cshtml"
using SKL.Report.Core.Models;

#line default
#line hidden
    [global::Microsoft.AspNetCore.Razor.Hosting.RazorSourceChecksumAttribute(@"SHA1", @"247394bb2d0747b5c1a654db395b8ebf9bfba729", @"/Areas/ReportAdmin/Views/Pingyu/Edit.cshtml")]
    [global::Microsoft.AspNetCore.Razor.Hosting.RazorSourceChecksumAttribute(@"SHA1", @"2fdc0f39ef77b1a2e241c76302a7505fed5762a6", @"/Areas/ReportAdmin/Views/_ViewImports.cshtml")]
    public class Areas_ReportAdmin_Views_Pingyu_Edit : global::Microsoft.AspNetCore.Mvc.Razor.RazorPage<dynamic>
    {
        #pragma warning disable 1998
        public async override global::System.Threading.Tasks.Task ExecuteAsync()
        {
#line 1 "/Users/pandanting/Projects/TestReport/src/SKL.Report.Core.UI/Areas/ReportAdmin/Views/Pingyu/Edit.cshtml"
  
    Layout="/Areas/ReportAdmin/Views/Shared/_Edit.cshtml";

#line default
#line hidden
            DefineSection("head", async() => {
                BeginContext(78, 119, true);
                WriteLiteral("\n    <style type=\"text/css\">\n    .border{\n        border-left:1px solid #ddd;\n        height: 100%;\n    }\n    </style>\n");
                EndContext();
            }
            );
            BeginContext(199, 2502, true);
            WriteLiteral(@"<div class=""layui-row"">
    <div class=""layui-col-sm4"">
        <fieldset class=""layui-elem-field layui-field-title"">
            <legend>模块列表</legend>
            <div class=""layui-field-box"">
                <div id=""moduleTree""></div>
            </div>
        </fieldset>
    </div>
    <div class=""layui-col-sm8 border"">
        <div class=""row"" style=""margin-bottom:30px;"">
            <fieldset class=""layui-elem-field layui-field-title"">
                <legend>添加评语</legend>
                <div class=""layui-field-box"">
                    <div class=""layui-form-item"">
                        <label class=""layui-form-label"">模块名称</label>
                        <div class=""layui-input-inline"">
                            <input type=""text"" id=""ModuleName"" readonly=""readonly"" class=""layui-input"">
                            <input type=""hidden"" id=""ModuleID"" value=""0"">
                        </div>
                        <label class=""layui-form-label"">分值≤</label>
                        <div class=""layu");
            WriteLiteral(@"i-input-inline"">
                            <input type=""text"" id=""MaxScores"" required  lay-verify=""required"" autocomplete=""off"" class=""layui-input"">
                        </div>
                    </div>
                    <div class=""layui-form-item"">
                        <label class=""layui-form-label"">评语</label>
                        <div class=""layui-input-block"">
                            <textarea class=""layui-textarea"" id=""CommentContent""></textarea>
                        </div>
                    </div>
                    <div class=""layui-form-item"">
                        <div class=""layui-input-block"">
                        <button class=""layui-btn"" lay-submit id=""add"" lay-filter=""formDemo"">新增</button>
                        <button class=""layui-btn layui-btn-danger layui-hide"" id=""update"" lay-submit lay-filter=""formDemo"">修改</button>
                        </div>
                    </div>
                </div>
            </fieldset>
            
        </div>
        <div ");
            WriteLiteral(@"class=""row"">
            <div class=""layui-col-md12"" id=""comments""></div>
        </div>
    </div>
</div>
<script id=""pytmp"" type=""text/html"">
<div class=""layui-collapse"">
    {{# layui.each(d,function(index,item){ }}
    <div class=""layui-colla-item"">
        <h2 class=""layui-colla-title"">小于等于 {{ item.maxScores }} 分</h2>
        <div class=""layui-colla-content layui-show"">{{ item.commentContent }}</div>
    </div>
    {{# });  }}
</div>
</script>

");
            EndContext();
            DefineSection("footer", async() => {
                BeginContext(2717, 170, true);
                WriteLiteral("\n    <script type=\"text/javascript\">\n    //模块树\n    layui.use(\'tree\', function(){\n        var tree = layui.tree;\n        $.post(\'/reportadmin/module/getmoduletree\',{rptid:");
                EndContext();
                BeginContext(2888, 17, false);
#line 74 "/Users/pandanting/Projects/TestReport/src/SKL.Report.Core.UI/Areas/ReportAdmin/Views/Pingyu/Edit.cshtml"
                                                     Write(ViewData["rptid"]);

#line default
#line hidden
                EndContext();
                BeginContext(2905, 471, true);
                WriteLiteral(@"},function(data){
            //console.log(data)
            //渲染
            var inst1 = tree.render({
            elem: '#moduleTree',
            data: data,
            onlyIconControl: true,
            click:function(obj){
                //console.log(obj.data.id);
                getComment(obj.data.id);
            }
            });
        })        
    });

    //获取模块评语
    var getComment=function(mid){
        $('#ModuleID').val(mid);
        var rptid=");
                EndContext();
                BeginContext(3377, 17, false);
#line 92 "/Users/pandanting/Projects/TestReport/src/SKL.Report.Core.UI/Areas/ReportAdmin/Views/Pingyu/Edit.cshtml"
             Write(ViewData["rptid"]);

#line default
#line hidden
                EndContext();
                BeginContext(3394, 884, true);
                WriteLiteral(@";

        //获取模块信息
        if(mid===0){
            $('#ModuleName').val('总评');
        }else{
            $.post('/reportadmin/module/GetModule',{id:mid},function(obj){
                $('#ModuleName').val(obj.moduleName);
            });
        }
        //获取模块评语列表
        $.post('/reportadmin/pingyu/GetCommentList',{rptid:rptid,mid:mid},function(data){
            if(data.length>0){
                layui.use('laytpl', function(){
                    var laytpl = layui.laytpl;
                    laytpl($('#pytmp').html()).render(data,function(html){
                        $('#comments').html(html);
                    });
                });
            }else{
                $('#comments').html('');
            }
        });
    }

    $(function(){
        //初次加载总评语
        getComment(0);
        //添加评语
        $('#add').click(function(){
            var reportID=");
                EndContext();
                BeginContext(4279, 17, false);
#line 122 "/Users/pandanting/Projects/TestReport/src/SKL.Report.Core.UI/Areas/ReportAdmin/Views/Pingyu/Edit.cshtml"
                    Write(ViewData["rptid"]);

#line default
#line hidden
                EndContext();
                BeginContext(4296, 431, true);
                WriteLiteral(@";
            var data={
                ReportID:reportID,
                ModuleID:$('#ModuleID').val(),
                MaxScores:$('#MaxScores').val(),
                CommentContent:$('#CommentContent').val(),
            };
            $.post('/reportadmin/pingyu/addpy',data,function(obj){
                //console.log(obj);
                getComment($('#ModuleID').val());
            });
        })
    })
    </script>
");
                EndContext();
            }
            );
        }
        #pragma warning restore 1998
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.ViewFeatures.IModelExpressionProvider ModelExpressionProvider { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.IUrlHelper Url { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.IViewComponentHelper Component { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.Rendering.IJsonHelper Json { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.Rendering.IHtmlHelper<dynamic> Html { get; private set; }
    }
}
#pragma warning restore 1591
